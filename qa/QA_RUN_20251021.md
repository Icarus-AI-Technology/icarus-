# QA RUN 2025-10-21 (atualizado)

## Integrações (sessão atual)
- Meili: OK (http://localhost:7700)
- Tesseract: OK (worker created)
- Ollama: OK (http://localhost:11434)
- Email (Mailhog): OK (http://localhost:8025)
- BullMQ: OK (http://localhost:9900)
- PostHog: OK (key present)

> Observações: PostHog estava em SKIP anteriormente; habilitado com VITE_POSTHOG_API_KEY na sessão.

---

# QA Run – 21/10/2025

## Resumo
- `npm run qa:forms` ✔️ – Todos os formulários possuem bindings controlados (`value` + `onChange`).
- `npm run qa:buttons:topbar` ✔️ – Topbar com handlers para menu, ajuda, notificações, tema, configurações e avatar.
- `npm run qa:ui` ✔️ – Pipeline UI (forms + topbar) executando via `npm-run-all`.
- `npm run bench:tesseract` ✔️ – Acurácia 100% (modo keywords).
- `npm run bench:tesseract:strict` ✔️ – Regex de `ChaveAcesso`/`Total` válida.

## Itens corrigidos nesta rodada
1. `src/components/forms/ExemploCadastroPacienteMultiStep.tsx`
   - Inputs e selects agora controlados (estado local).
   - Campos auto-preenchidos por CEP mantêm `value + onChange`/`readOnly`.
2. `src/pages/compras/GestaoCotacoes.tsx`
   - Campos de resumo da cotação controlados; textarea já possuía `onChange`.
3. `src/pages/compras/NotasCompra.tsx`
   - Inputs de número/tipo/data controlados com `useState`.
4. `tools/qa/check-buttons-topbar.cjs`
   - Novo script MCP para validar handlers obrigatórios da topbar.

## Observações
- Executar `npm run qa:ui` antes de PRs relacionados à topbar ou formulários.
- Manter `FF_*` configurados (`FF_AI_TUTOR_CIRURGIAS` etc.) para habilitar funcionalidades em testes E2E.
- Benchmarks (Meili/Ollama) pendentes aguardando endpoints definitivos.
- Próximos passos aprovados: implementar `/api/ml/enqueue` real, testes Vitest (MlService, worker), persistência de vetores.

